#include "buzzer.h"

extern TIM_HandleTypeDef htim6;
extern TIM_HandleTypeDef htim3;

StateBuzzer stateMusic = MUSIC_OFF;

int note []={ 390, 340, 303, 286, 255, 227, 202};
int noteJonatan []= {255 , 303,  303,  286, 340, 340, 390, 340, 303, 286, 255, 255, 255, 255 , 303,  303,  286, 340, 340 ,390, 303, 255, 255,390};
int periodeJonatan[]={2499,2499,4999, 2499, 2499,4999,2499,2499,2499 ,2499,4999,2499,2499, 2499,2499,4999, 2499, 2499,4999,2499,2499,2499 ,4999};
int indexNote =0;
int currentNote= 0;


void playNote(int indexNote)
{
	currentNote = indexNote;
	__HAL_TIM_SET_COUNTER(&htim3,0);
	__HAL_TIM_SET_AUTORELOAD(&htim3, noteJonatan[currentNote]);
	__HAL_TIM_SET_COMPARE(&htim3, TIM_CHANNEL_1, (noteJonatan[currentNote]/2));

	__HAL_TIM_SET_COUNTER(&htim6,0);
	__HAL_TIM_SET_AUTORELOAD(&htim6, periodeJonatan[currentNote]);

}


void playNextNote()
{
	currentNote++;
	if(currentNote>=22)
	{
	   currentNote= 0;
	}
	playNote(currentNote);
}


